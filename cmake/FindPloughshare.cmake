find_program(ploughshare-config ploughshare-config PATHS ${CMAKE_SOURCE_DIR}/deps/ploughshare/bin)
if(EXISTS "${ploughshare-config}")
  set(PLOUGHSHARE_FOUND 1)
  execute_process(COMMAND ${ploughshare-config} --version OUTPUT_VARIABLE PLOUGHSHARE_VERSION OUTPUT_STRIP_TRAILING_WHITESPACE)
  execute_process(COMMAND ${ploughshare-config} --prefix OUTPUT_VARIABLE PLOUGHSHARE_PREFIX OUTPUT_STRIP_TRAILING_WHITESPACE)
  execute_process(COMMAND ${ploughshare-config} --libdir OUTPUT_VARIABLE PLOUGHSHARE_LIBRARY_DIRS OUTPUT_STRIP_TRAILING_WHITESPACE)
  execute_process(COMMAND ${ploughshare-config} --incdir OUTPUT_VARIABLE PLOUGHSHARE_INCLUDE_DIRS OUTPUT_STRIP_TRAILING_WHITESPACE)
  add_library(PLOUGHSHARE SHARED IMPORTED)
  set_target_properties(PLOUGHSHARE PROPERTIES IMPORTED_LOCATION "${PLOUGHSHARE_LIBRARY_DIRS}/libploughshare.a")
  set_target_properties(PLOUGHSHARE PROPERTIES INTERFACE_INCLUDE_DIRECTORIES "${PLOUGHSHARE_INCLUDE_DIRS}/")
else()
  set(PLOUGHSHARE_FOUND 0)
endif()
if(NOT PLOUGHSHARE_FOUND AND PLOUGHSHARE_FIND_REQUIRED)
  message(FATAL_ERROR "PLOUGHSHARE not found")
endif()
if(NOT PLOUGHSHARE_FIND_QUIETLY)
  if (PLOUGHSHARE_FOUND)
    message(STATUS "Found Plougshare ${PLOUGHSHARE_VERSION}: ${PLOUGHSHARE_PREFIX}")
  else()
    message(STATUS "Plougshare not found")
  endif()
endif()
