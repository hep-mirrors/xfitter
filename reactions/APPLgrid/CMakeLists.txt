if(NOT APPLgrid_FOUND)
  message(STATUS "Skipping optional reaction APPLgrid because APPLgrid library was not found")
  return()
endif()

if(NOT ROOT_FOUND)
  message(STATUS "Skipping optional reaction APPLgrid because ROOT library was not found")
  return()
endif()

if(APPLwrap_FOUND)
  message(STATUS "Found applwrap, including in APPLgrid install ")
  add_definitions(-DAPPLWRAP_FOUND)
endif()

if (PLOUGHSHARE_FOUND)
  message(STATUS "Found ploughshare, including in APPLgrid install ")
  add_definitions(-DPLOUGHSHARE_FOUND)
  add_definitions(-I${PLOUGHSHARE_INCLUDE_DIRS})
endif()

set(TARGET reactionAPPLgrid)
add_library(${TARGET} MODULE ReactionAPPLgrid.cc)
if (PLOUGHSHARE_FOUND)
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid PLOUGHSHARE)
else()
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid)
endif()
if (APPLwrap_FOUND)
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid APPLwrap)
else()
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid)
endif()
if (APPLwrap_FOUND AND PLOUGHSHARE_FOUND)
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid APPLwrap PLOUGHSHARE)
else()
  target_link_libraries(${TARGET} PRIVATE xfitter APPLgrid)
endif()

install(TARGETS ${TARGET} DESTINATION ${DEST_MODULE})
install(FILES APPLgrid.yaml DESTINATION ${DEST_YAML}/reactions)
